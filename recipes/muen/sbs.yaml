inherit: [make, install]

metaEnvironment:
  PKG_DESCRIPTION: "Signed Block Stream (SBS) Tools"

checkoutSCM:
  scm: git
  url: https://git.codelabs.ch/sbs-tools.git
  branch: main
  commit: e8ad94e71a60897f9f439ee80252b724cf1c5f40

buildScript: |
  rsync -a --delete $1/ .

multiPackage:
  keys:
    packageScript: |
      cp -r $1/data/gpg-homedir/* .
  tools:
    buildTools: [target-toolchain, gprbuild]
    buildScript: |
      makeParallel
      make install DESTDIR=$(pwd)/install/usr

    packageScript: |
      installPackageBin $1/install/

    provideTools:
      sbs_tools: "usr/bin"
